<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.CheckBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ProgressIndicator?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<AnchorPane xmlns="http://javafx.com/javafx/8.0.141" xmlns:fx="http://javafx.com/fxml/1">
   <children>
      <VBox spacing="5.0" AnchorPane.bottomAnchor="0.0" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" AnchorPane.topAnchor="0.0">
         <children>
            <HBox alignment="CENTER_LEFT">
               <children>
                  <Label prefWidth="400.0" text="The preprocessed image will be used for the detection. Note that the original image is still used for the overlay of the filament during the next steps." wrapText="true">
                     <font>
                        <Font name="System Italic" size="11.0" />
                     </font>
                  </Label>
               </children>
               <padding>
                  <Insets bottom="5.0" left="5.0" right="5.0" top="5.0" />
               </padding>
            </HBox>
            <Separator prefWidth="200.0" />
            <VBox>
               <children>
                  <HBox alignment="CENTER_LEFT" spacing="5.0">
                     <children>
                        <CheckBox fx:id="convert8BitCheckbox" disable="true" mnemonicParsing="false" onAction="#updateParameters" selected="true" text="Convert to 8 bit (mandatory at the moment)." />
                     </children>
                     <padding>
                        <Insets bottom="5.0" left="5.0" right="5.0" top="5.0" />
                     </padding>
                  </HBox>
                  <VBox spacing="5.0">
                     <children>
                        <Label prefWidth="400.0" text="The detection algorithm only works on 8-bit images." wrapText="true">
                           <font>
                              <Font name="System Italic" size="10.0" />
                           </font>
                        </Label>
                     </children>
                     <padding>
                        <Insets bottom="5.0" left="5.0" right="5.0" />
                     </padding>
                     <opaqueInsets>
                        <Insets top="2.0" />
                     </opaqueInsets>
                  </VBox>
               </children>
            </VBox>
            <VBox>
               <children>
                  <HBox alignment="CENTER_LEFT" spacing="5.0">
                     <children>
                        <CheckBox fx:id="doGaussianFilterCheckbox" mnemonicParsing="false" onAction="#updateParameters" text="Gaussian Filter" />
                        <TextField fx:id="gaussianFilterSizeField" onAction="#updateParameters" onKeyReleased="#updateParameters" prefWidth="60.0" />
                        <Label text="pixel(s)" />
                     </children>
                     <padding>
                        <Insets bottom="5.0" left="5.0" right="5.0" top="5.0" />
                     </padding>
                  </HBox>
                  <VBox spacing="5.0">
                     <children>
                        <Label prefWidth="400.0" text="The classic Gaussian filter can remove some noise and smooth the image." wrapText="true">
                           <font>
                              <Font name="System Italic" size="10.0" />
                           </font>
                        </Label>
                     </children>
                     <padding>
                        <Insets bottom="5.0" left="5.0" right="5.0" />
                     </padding>
                     <opaqueInsets>
                        <Insets top="2.0" />
                     </opaqueInsets>
                  </VBox>
               </children>
            </VBox>
            <VBox>
               <children>
                  <HBox alignment="CENTER_LEFT" spacing="5.0">
                     <children>
                        <CheckBox fx:id="doDifferenceOfGaussianFilterCheckbox" mnemonicParsing="false" onAction="#updateParameters" text="Difference Of Gaussian" />
                        <VBox>
                           <children>
                              <HBox spacing="5.0">
                                 <children>
                                    <Label text="Sigma 1 : " />
                                    <TextField fx:id="sigma1DOGField" onAction="#updateParameters" onKeyReleased="#updateParameters" prefWidth="60.0" />
                                    <Label text="pixel(s)" />
                                 </children>
                                 <padding>
                                    <Insets bottom="5.0" left="5.0" right="5.0" top="5.0" />
                                 </padding>
                              </HBox>
                              <HBox spacing="5.0">
                                 <children>
                                    <Label text="Sigma 2 : " />
                                    <TextField fx:id="sigma2DOGField" onAction="#updateParameters" onKeyReleased="#updateParameters" prefWidth="60.0" />
                                    <Label text="pixel(s)" />
                                 </children>
                                 <padding>
                                    <Insets bottom="5.0" left="5.0" right="5.0" top="5.0" />
                                 </padding>
                              </HBox>
                           </children>
                        </VBox>
                     </children>
                     <padding>
                        <Insets bottom="5.0" left="5.0" right="5.0" top="5.0" />
                     </padding>
                  </HBox>
                  <VBox spacing="5.0">
                     <children>
                        <Label prefWidth="400.0" text="Difference of Gaussians (DoG) is a feature enhancement algorithm that involves the subtraction of one blurred version of an original image from another, less blurred version of the original.  This method  discard high and low frequencies information, it's a band-pass filter." wrapText="true">
                           <font>
                              <Font name="System Italic" size="10.0" />
                           </font>
                        </Label>
                     </children>
                     <padding>
                        <Insets bottom="5.0" left="5.0" right="5.0" />
                     </padding>
                     <opaqueInsets>
                        <Insets top="2.0" />
                     </opaqueInsets>
                  </VBox>
               </children>
            </VBox>
            <VBox>
               <children>
                  <HBox alignment="CENTER_LEFT" spacing="5.0">
                     <children>
                        <CheckBox fx:id="doflatFieldCorrectionCheckbox" mnemonicParsing="false" onAction="#updateParameters" text="Pseudo Flat Field Correction" />
                        <TextField fx:id="flatFieldCorrectionGaussianFilterSizeField" onAction="#updateParameters" onKeyReleased="#updateParameters" prefWidth="60.0" />
                        <Label text="pixel(s)" />
                     </children>
                     <padding>
                        <Insets left="5.0" right="5.0" top="5.0" />
                     </padding>
                     <opaqueInsets>
                        <Insets bottom="2.0" />
                     </opaqueInsets>
                  </HBox>
                  <VBox spacing="5.0">
                     <children>
                        <Label prefWidth="400.0" text="Pseudo flat field correction estimate the background by applying a large filter size. Then it uses this &quot;pseudo background&quot; image to subtract it from the original image." wrapText="true">
                           <font>
                              <Font name="System Italic" size="10.0" />
                           </font>
                        </Label>
                     </children>
                     <padding>
                        <Insets bottom="5.0" left="5.0" right="5.0" />
                     </padding>
                     <opaqueInsets>
                        <Insets top="2.0" />
                     </opaqueInsets>
                  </VBox>
               </children>
            </VBox>
            <Separator prefWidth="200.0" />
            <HBox alignment="CENTER_LEFT" spacing="5.0">
               <children>
                  <CheckBox fx:id="showImageCheckbox" mnemonicParsing="false" onAction="#updateParameters" text="Show Preprocessed Image." />
               </children>
               <padding>
                  <Insets bottom="5.0" left="5.0" right="5.0" top="5.0" />
               </padding>
            </HBox>
            <HBox alignment="CENTER_LEFT" spacing="5.0">
               <children>
                  <CheckBox fx:id="saveImageCheckbox" mnemonicParsing="false" onAction="#updateParameters" text="Save Preprocessed Image next to the Original." />
               </children>
               <padding>
                  <Insets bottom="5.0" left="5.0" right="5.0" top="5.0" />
               </padding>
            </HBox>
            <HBox alignment="CENTER_LEFT" spacing="5.0">
               <children>
                  <CheckBox fx:id="useForOverlayCheckbox" mnemonicParsing="false" onAction="#updateParameters" text="Use Preprocessed Image for overlay." />
               </children>
               <padding>
                  <Insets bottom="5.0" left="5.0" right="5.0" top="5.0" />
               </padding>
            </HBox>
            <HBox alignment="BOTTOM_RIGHT" VBox.vgrow="ALWAYS">
               <padding>
                  <Insets left="5.0" right="5.0" top="5.0" />
               </padding>
               <children>
                  <ProgressIndicator fx:id="detectionProgressIndicator" maxHeight="26.0" />
                  <Button mnemonicParsing="false" onAction="#preprocessImage" text="Preprocess Image" />
               </children>
            </HBox>
         </children>
         <padding>
            <Insets bottom="5.0" left="5.0" right="5.0" top="5.0" />
         </padding>
      </VBox>
   </children>
</AnchorPane>
